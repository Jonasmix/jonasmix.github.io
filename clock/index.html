<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamisk Tabell</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 20px;
        }
        table {
            width: 100%;
            max-width: 100vw;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid black;
            padding: 8px;
            text-align: left;
            word-break: break-word; /* Gjør at lange ord brytes */
        }
        th {
            background-color: #f2f2f2;
            font-weight: bold;
        }
        table th:first-child, table td:first-child {
            font-weight: bold;
            width: 5ch; /* Holder første kolonne på ca. 5 tegns bredde */
        }
        td {
            min-width: 100px; /* Forhindrer for smale celler */
        }
        .button-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }
        .coordinates {
            position: fixed;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 5px;
            border-radius: 5px;
            display: none;
            font-size: 14px;
        }
    </style>
</head>
<body>

    <table id="dynamicTable">
        <thead>
            <tr>
                <th>Nr.</th>
                <th>Tittel 1</th>
                <th>Tittel 2</th>
                <th>Tittel 3</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>1</td>
                <td contenteditable="true"></td>
                <td contenteditable="true"></td>
                <td contenteditable="true"></td>
            </tr>
        </tbody>
    </table>

    <div class="button-container">
        <button onclick="addRow()">Legg til rad</button>
        <button onclick="addColumn()">Legg til kolonne</button>
        <button onclick="removeRow()">Fjern rad</button>
        <button onclick="removeColumn()">Fjern kolonne</button>
    </div>

    <div class="coordinates" id="coordinates"></div>

    <script>
        function addRow() {
            let table = document.getElementById("dynamicTable").getElementsByTagName('tbody')[0];
            let newRow = table.insertRow();
            let columnCount = document.getElementById("dynamicTable").rows[0].cells.length;

            for (let i = 0; i < columnCount; i++) {
                let cell = newRow.insertCell(i);
                if (i === 0) {
                    cell.textContent = table.rows.length; // Oppdaterer radnummer
                    cell.style.fontWeight = "bold";
                } else {
                    cell.contentEditable = "true";
                }
            }
        }

        function addColumn() {
            let table = document.getElementById("dynamicTable");
            let headerRow = table.rows[0];
            let newColumnIndex = headerRow.cells.length;

            let newHeader = document.createElement("th");
            newHeader.textContent = "Tittel " + newColumnIndex;
            newHeader.contentEditable = "true";
            newHeader.style.backgroundColor = "#f2f2f2";
            newHeader.style.fontWeight = "bold";
            headerRow.appendChild(newHeader);

            for (let i = 1; i < table.rows.length; i++) {
                let newCell = table.rows[i].insertCell();
                newCell.contentEditable = "true";
            }
        }

        function removeRow() {
            let table = document.getElementById("dynamicTable");
            if (table.rows.length > 2) {
                table.deleteRow(table.rows.length - 1);
            }
        }

        function removeColumn() {
            let table = document.getElementById("dynamicTable");
            let columnCount = table.rows[0].cells.length;

            if (columnCount > 2) {
                for (let i = 0; i < table.rows.length; i++) {
                    table.rows[i].deleteCell(columnCount - 1);
                }
            }
        }

        document.addEventListener("keydown", function(event) {
            if (event.key === "Tab") {
                event.preventDefault();
                addRow();
            }
        });

        document.addEventListener("mouseover", function(event) {
            let target = event.target;
            let coordinates = document.getElementById("coordinates");

            if (target.tagName === "TD" || target.tagName === "TH") {
                let row = target.parentElement.rowIndex + 1;
                let column = target.cellIndex + 1;
                coordinates.style.display = "block";
                coordinates.textContent = `Rad: ${row}, Kolonne: ${column}`;
                coordinates.style.top = (event.clientY + 10) + "px";
                coordinates.style.left = (event.clientX + 10) + "px";
            } else {
                coordinates.style.display = "none";
            }
        });
    </script>

</body>
</html>
